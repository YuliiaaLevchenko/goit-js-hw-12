{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.getElementById(\"search-form\");\nconst gallery = document.getElementById(\"gallery\");\nconst loader = document.querySelector(\".loader\");\nconst input = document.querySelector(\"input\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\nconst endOfCollection = document.querySelector(\".end-of-collection\");\nlet currentPage = 1;\n\nlet param = {\n    key: '41611765-95d63315582311c92a96eb89d',\n    q: 'cat',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n};\n\nloadMoreBtn.style.display = 'none';\n\nform.addEventListener('click', async event => {\n    event.preventDefault();\n  \n    if (event.target.type === 'submit') {\n        param.q = input.value;\n        currentPage = 1;\n      const searchParams = new URLSearchParams({ ...param, page:currentPage });\n     await searchImg(searchParams);\n    }\n    form.reset();\n  });\n\n  loadMoreBtn.addEventListener('click', async () => {\n    currentPage++;\n    const newSearchParams = new URLSearchParams({ ...param, page: currentPage });\n     await searchImg(newSearchParams);\n  });\n  \n  form.addEventListener('submit', async (event) => {\n    event.preventDefault();\n  \n    param.q = input.value;\n    currentPage = 1; \n    const searchParams = new URLSearchParams({ ...param, page: currentPage });\n    await searchImg(searchParams);\n  \n    \n    if (gallery.children.length > 0) {\n      loadMoreBtn.style.display = 'block';\n    } else {\n      loadMoreBtn.style.display = 'none';\n    }\n  });\n\n\n\n async function searchImg(params) {\n    loader.style.display = 'block';\n    gallery.style.display = 'none';\n\n    try {\n        const response = await\n        axios.get(`https://pixabay.com/api/?${params}`);\n        \n\nconst { hits } = response.data;\n       \n        if (hits.length > 0) {\n          const renderImg = hits.reduce((html, hit) => {\n            \n              html +=\n              `<li class=\"gallery-item\">\n          <a href=${hit.largeImageURL}> \n            <img class=\"gallery-img\" src =${hit.webformatURL} alt=${hit.tags}/>\n          </a>\n          <div class=\"gallery-text-box\">\n            <p>likes: <span class=\"text-value\">${hit.likes}</span></p>\n            <p>views: <span class=\"text-value\">${hit.views}</span></p>\n            <p>comments: <span class=\"text-value\">${hit.comments}</span></p>\n            <p>downloads: <span class=\"text-value\">${hit.downloads}</span></p>\n        </div>\n        </li>`;\n        return html;\n          }, '');\n\n          gallery.innerHTML = renderImg;\n  \n          let lightbox = new SimpleLightbox('.gallery a', {\n            nav: true,\n            captionDelay: 250,\n            captionsData: 'alt',\n            close: true,\n            enableKeyboard: true,\n            docClose: true,\n          });\n          lightbox.refresh();\n\n          smoothScrollToTop();\n        } else {\n          gallery.style.display = 'none';\n          endOfCollection.style.display = \"block\";\n          iziToast.error({\n            position: 'topRight',\n            message:\n              \"We\\'re sorry, but you\\'ve reached the end of search results.\",\n          });\n        }\n      \n    } catch (error) {\n        console.error(error);\n      } finally {\n        loader.style.display = \"none\";\n        gallery.style.display = \"flex\";\n      }\n  }\n\n\nfunction smoothScrollToTop() {\n    window.scroll({\n        top: 0,\n        left: 0,\n        behavior: \"smooth\",\n    });\n}\n\n"],"names":["form","gallery","loader","input","loadMoreBtn","endOfCollection","currentPage","param","event","searchParams","searchImg","newSearchParams","params","response","axios","hits","renderImg","html","hit","SimpleLightbox","smoothScrollToTop","iziToast","error"],"mappings":"owBAQA,MAAMA,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAQ,SAAS,cAAc,OAAO,EACtCC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAkB,SAAS,cAAc,oBAAoB,EACnE,IAAIC,EAAc,EAEdC,EAAQ,CACR,IAAK,qCACL,EAAG,MACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,EAEAH,EAAY,MAAM,QAAU,OAE5BJ,EAAK,iBAAiB,QAAS,MAAMQ,GAAS,CAG1C,GAFAA,EAAM,eAAc,EAEhBA,EAAM,OAAO,OAAS,SAAU,CAChCD,EAAM,EAAIJ,EAAM,MAChBG,EAAc,EAChB,MAAMG,EAAe,IAAI,gBAAgB,CAAE,GAAGF,EAAO,KAAKD,CAAW,CAAE,EACxE,MAAMI,EAAUD,CAAY,CAC5B,CACDT,EAAK,MAAK,CACd,CAAG,EAEDI,EAAY,iBAAiB,QAAS,SAAY,CAChDE,IACA,MAAMK,EAAkB,IAAI,gBAAgB,CAAE,GAAGJ,EAAO,KAAMD,CAAW,CAAE,EAC1E,MAAMI,EAAUC,CAAe,CACpC,CAAG,EAEDX,EAAK,iBAAiB,SAAU,MAAOQ,GAAU,CAC/CA,EAAM,eAAc,EAEpBD,EAAM,EAAIJ,EAAM,MAChBG,EAAc,EACd,MAAMG,EAAe,IAAI,gBAAgB,CAAE,GAAGF,EAAO,KAAMD,CAAW,CAAE,EACxE,MAAMI,EAAUD,CAAY,EAGxBR,EAAQ,SAAS,OAAS,EAC5BG,EAAY,MAAM,QAAU,QAE5BA,EAAY,MAAM,QAAU,MAElC,CAAG,EAIF,eAAeM,EAAUE,EAAQ,CAC9BV,EAAO,MAAM,QAAU,QACvBD,EAAQ,MAAM,QAAU,OAExB,GAAI,CACA,MAAMY,EAAW,MACjBC,EAAM,IAAI,4BAA4BF,GAAQ,EAGhD,CAAE,KAAAG,CAAI,EAAKF,EAAS,KAElB,GAAIE,EAAK,OAAS,EAAG,CACnB,MAAMC,EAAYD,EAAK,OAAO,CAACE,EAAMC,KAEjCD,GACA;AAAA,oBACMC,EAAI;AAAA,4CACoBA,EAAI,oBAAoBA,EAAI;AAAA;AAAA;AAAA,iDAGvBA,EAAI;AAAA,iDACJA,EAAI;AAAA,oDACDA,EAAI;AAAA,qDACHA,EAAI;AAAA;AAAA,eAG1CD,GACF,EAAE,EAELhB,EAAQ,UAAYe,EAEL,IAAIG,EAAe,aAAc,CAC9C,IAAK,GACL,aAAc,IACd,aAAc,MACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACtB,CAAW,EACQ,QAAO,EAEhBC,GACV,MACUnB,EAAQ,MAAM,QAAU,OACxBI,EAAgB,MAAM,QAAU,QAChCgB,EAAS,MAAM,CACb,SAAU,WACV,QACE,4DACd,CAAW,CAGN,OAAQC,EAAP,CACE,QAAQ,MAAMA,CAAK,CAC3B,QAAgB,CACRpB,EAAO,MAAM,QAAU,OACvBD,EAAQ,MAAM,QAAU,MACzB,CACJ,CAGH,SAASmB,GAAoB,CACzB,OAAO,OAAO,CACV,IAAK,EACL,KAAM,EACN,SAAU,QAClB,CAAK,CACL"}