{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/pixabay-api.js","../src/js/render-images.js","../src/js/lightbox.js","../src/js/smooth.js","../src/main.js"],"sourcesContent":["export const refs = {\n    form: document.querySelector(\"#search-form\"),\n    gallery: document.querySelector(\".gallery\"),\nloader: document.querySelector(\".loader\"),\ninput: document.querySelector(\"input\"),\nloadMoreBtn: document.querySelector(\".load-more-btn\"),\nendOfCollection: document.querySelector(\".end-of-collection\")\n};\n\n\n\n","import axios from \"axios\";\n\n\n\n\nexport async function fetchImages(searchQuery, page) {\n    const searchParams = new URLSearchParams({\n        key: '41611765-95d63315582311c92a96eb89d',\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: 40\n    });\n\n    const { data } = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n    return data;\n}","import { refs } from \"./refs\";\n\n export function renderGallery(images) {\n    const renderImg = images.reduce((html, hit) => {  \n        html += `<li class=\"gallery-item\">\n    <a href=${hit.largeImageURL}> \n      <img class=\"gallery-img\" src =${hit.webformatURL} alt=${hit.tags}/>\n    </a>\n    <div class=\"gallery-text-box\">\n      <p>likes: <span class=\"text-value\">${hit.likes}</span></p>\n      <p>views: <span class=\"text-value\">${hit.views}</span></p>\n      <p>comments: <span class=\"text-value\">${hit.comments}</span></p>\n      <p>downloads: <span class=\"text-value\">${hit.downloads}</span></p>\n    </div>\n    </li>`;\n    return html;\n    }, '');\n    \n    refs.gallery.insertAdjacentHTML('beforeend', renderImg)\n}\n\nexport function clearGalleryMarkup() {\n    refs.gallery.innerHTML = '';\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n                 nav: true,\n                captionDelay: 250,\n                 captionsData: 'alt',\n                 close: true,\n                 enableKeyboard: true,\n                 docClose: true,\n               });\n               lightbox.refresh();","export function smoothScrollToTop() {\n    window.scroll({\n        top: 0,\n        left: 0,\n        behavior: \"smooth\",\n    });\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { refs } from \"./js/refs\";\nimport { fetchImages } from \"./js/pixabay-api\";\nimport { clearGalleryMarkup, renderGallery } from \"./js/render-images\";\nimport { lightbox } from \"./js/lightbox\";\nimport { smoothScrollToTop } from \"./js/smooth\";\n\nlet currentPage = 1;\nlet searchQuery;\n\nrefs.loadMoreBtn.style.display = 'none';\n\nrefs.form.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    refs.loadMoreBtn.style.display = 'none';\n  clearGalleryMarkup();    \n    currentPage = 1; \n    searchQuery = refs.input.value.trim();\n    if (!searchQuery) {\n        iziToast.error({\n            position: 'topRight',\n            message: \"Input empty! Try again.\",\n          });\n        return;\n    }\n    \n    try {\n        const {hits, totalHits} = await fetchImages(searchQuery, currentPage);\n\n        if (totalHits === 0) {\n            iziToast.error({\n            position: 'topRight',\n            message: \"Sorry, try again.\",\n         });\n         return;\n        }\nrenderGallery(hits);   \nrefs.loadMoreBtn.style.display = 'block';\n         lightbox.refresh();\n         \n         if (currentPage === Math.ceil(totalHits / 40)) {\n            iziToast.error({\n        position: 'topRight',\n            message: \"We're sorry, but you've reached the end of search results.\",\n                          });\n         refs.loadMoreBtn.style.display = 'none';\n    \n          }  \n    } catch (error) {\n        iziToast.error({\n            position: 'topRight',\n                message: \"Please try again.\",\n                              });\n        console.log(error);\n        \n    }\n  });\n\n\n  refs.loadMoreBtn.addEventListener('click', async () => {\n    currentPage++;\n    \n    try {\n        clearGalleryMarkup();\n      const {hits, totalHits} = await fetchImages(searchQuery, currentPage);\nrenderGallery(hits);\nlightbox.refresh();\nsmoothScrollToTop();   \n\n      if (currentPage === Math.ceil(totalHits / 40)) {\n        iziToast.info({\n    position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n                      });\n     refs.loadMoreBtn.style.display = 'none';\n\n      }  \n    } catch (error) {\n        console.log(error);\n    }\n  });\n\n\n//  async function searchImg(params) {\n//     loader.style.display = 'block';\n//     gallery.style.display = 'none';\n\n//     try {\n      \n// const { hits } = response.data;\n       \n//         if (hits.length > 0) {\n                 \n\n//           if (currentPage === 1) {\n//             loadMoreBtn.style.display = 'block';\n//         } else {\n//             loadMoreBtn.style.display ='none';\n//         }\n          \n//           smoothScrollToTop();\n//         } else {\n//           gallery.style.display = 'none';\n//           endOfCollection.style.display = \"block\";\n//           \n//         }\n      \n//     } catch (error) {\n//         console.error(error);\n//       } finally {\n//         loader.style.display = \"none\";\n//         gallery.style.display = \"flex\";\n//       }\n//   }\n\n\n"],"names":["refs","fetchImages","searchQuery","page","searchParams","data","axios","renderGallery","images","renderImg","html","hit","clearGalleryMarkup","lightbox","SimpleLightbox","smoothScrollToTop","currentPage","event","iziToast","hits","totalHits","error"],"mappings":"+vBAAO,MAAMA,EAAO,CAChB,KAAM,SAAS,cAAc,cAAc,EAC3C,QAAS,SAAS,cAAc,UAAU,EAC9C,OAAQ,SAAS,cAAc,SAAS,EACxC,MAAO,SAAS,cAAc,OAAO,EACrC,YAAa,SAAS,cAAc,gBAAgB,EACpD,gBAAiB,SAAS,cAAc,oBAAoB,CAC5D,ECFO,eAAeC,EAAYC,EAAaC,EAAM,CACjD,MAAMC,EAAe,IAAI,gBAAgB,CACrC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EAClB,CAAK,EAEK,CAAE,KAAAE,CAAM,EAAG,MAAMC,EAAM,IAAI,4BAA4BF,GAAc,EAC3E,OAAOC,CACX,CChBQ,SAASE,EAAcC,EAAQ,CACnC,MAAMC,EAAYD,EAAO,OAAO,CAACE,EAAMC,KACnCD,GAAQ;AAAA,cACFC,EAAI;AAAA,sCACoBA,EAAI,oBAAoBA,EAAI;AAAA;AAAA;AAAA,2CAGvBA,EAAI;AAAA,2CACJA,EAAI;AAAA,8CACDA,EAAI;AAAA,+CACHA,EAAI;AAAA;AAAA,WAGxCD,GACJ,EAAE,EAELV,EAAK,QAAQ,mBAAmB,YAAaS,CAAS,CAC1D,CAEO,SAASG,GAAqB,CACjCZ,EAAK,QAAQ,UAAY,EAC7B,CCpBO,MAAMa,EAAW,IAAIC,EAAe,aAAc,CACxC,IAAK,GACN,aAAc,IACb,aAAc,MACd,MAAO,GACP,eAAgB,GAChB,SAAU,EAC3B,CAAgB,EACDD,EAAS,QAAS,ECX1B,SAASE,GAAoB,CAChC,OAAO,OAAO,CACV,IAAK,EACL,KAAM,EACN,SAAU,QAClB,CAAK,CACL,CCGA,IAAIC,EAAc,EACdd,EAEJF,EAAK,YAAY,MAAM,QAAU,OAEjCA,EAAK,KAAK,iBAAiB,SAAU,MAAOiB,GAAU,CAMlD,GALAA,EAAM,eAAc,EACpBjB,EAAK,YAAY,MAAM,QAAU,OACnCY,IACEI,EAAc,EACdd,EAAcF,EAAK,MAAM,MAAM,KAAI,EAC/B,CAACE,EAAa,CACdgB,EAAS,MAAM,CACX,SAAU,WACV,QAAS,yBACrB,CAAW,EACH,MACH,CAED,GAAI,CACA,KAAM,CAAC,KAAAC,EAAM,UAAAC,CAAS,EAAI,MAAMnB,EAAYC,EAAac,CAAW,EAEpE,GAAII,IAAc,EAAG,CACjBF,EAAS,MAAM,CACf,SAAU,WACV,QAAS,mBACrB,CAAU,EACD,MACA,CACTX,EAAcY,CAAI,EAClBnB,EAAK,YAAY,MAAM,QAAU,QACxBa,EAAS,QAAO,EAEZG,IAAgB,KAAK,KAAKI,EAAY,EAAE,IACzCF,EAAS,MAAM,CACnB,SAAU,WACN,QAAS,4DACrB,CAA2B,EAClBlB,EAAK,YAAY,MAAM,QAAU,OAGrC,OAAQqB,EAAP,CACEH,EAAS,MAAM,CACX,SAAU,WACN,QAAS,mBACzB,CAA+B,EACvB,QAAQ,IAAIG,CAAK,CAEpB,CACL,CAAG,EAGDrB,EAAK,YAAY,iBAAiB,QAAS,SAAY,CACrDgB,IAEA,GAAI,CACAJ,IACF,KAAM,CAAC,KAAAO,EAAM,UAAAC,CAAS,EAAI,MAAMnB,EAAYC,EAAac,CAAW,EAC1ET,EAAcY,CAAI,EAClBN,EAAS,QAAO,EAChBE,IAEUC,IAAgB,KAAK,KAAKI,EAAY,EAAE,IAC1CF,EAAS,KAAK,CAClB,SAAU,WACN,QAAS,4DACjB,CAAuB,EAClBlB,EAAK,YAAY,MAAM,QAAU,OAGjC,OAAQqB,EAAP,CACE,QAAQ,IAAIA,CAAK,CACpB,CACL,CAAG"}